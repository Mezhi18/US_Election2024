---
title: "Will Kamala Harris will win the 2024 Presidential election"
subtitle: "Analysing the polls using baysian modeling"
author: 
  - Yan Mezhiborsky
  - Cristina Burca
  - Shreya Sakura Noskor
thanks: "Code and data are available at: [https://github.com/Mezhi18/US_Election2024.git](https://github.com/Mezhi18/US_Election2024.git)."
date: today
date-format: long
abstract: "We analyse the probability of Kamala Harris winning in the 7 swing states of USA using baysian modeling; Arizona, Michigan, Pennsylvania, Nevada, Georgia, Wisconsin, North Carolina. USA is a large country with its national economy affecting the global economic conditions, which is why predicting the future President of USA will help understand the future economic condiotion of the world. Through baysian modelling we found that North Carolina (47.26% support for Harris), Nevada(46.43% support for Harris), Wisconsin(48.38% support for Harris), Michigan(47.30% support for Harris), Pennsylvania(48.02% support for Harris) will vote Kamala Harris, while the rest of the swing states might vote Donald Trump, meaning that majority of the swing states will vote Kamala Harris. Provided this we predict that Kamal Harris will win the election. By creating a baysian model based on \"polls of polls \" where we compare the results from different polls, we are able to make this prediction."
format:
  pdf:
    bibliography: references.bib
    documentclass: article
    geometry: margin = 1in
number-sections: true
toc: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

library(tidyverse)
library(dplyr)
library(janitor)
library(lubridate)
library(modelsummary)
library(rstanarm)
library(knitr)
library(bayesplot)
```


# Introduction

The 2024 United States presidential election represents a pivotal moment in the country's political landscape. As in previous elections, swing states are projected to play a critical role in determining the outcome. Swing states, which are characterized by their shifting voting patterns and balanced support for both major political parties, have historically been the focus of intense campaign efforts and polling analyses. Understanding the dynamics and voter preferences in these states is crucial to gaining insight into the broader electoral trends that could shape the nation's future.

In this paper we aim to analyze polling data related to the 2024 election, with a particular emphasis on the swing states. By examining various polls and identifying patterns in voter sentiment, we seek to uncover the factors that may influence voter behavior in these highly contested regions. Our analysis will explore demographic shifts, the impact of key issues, and the level of voter engagement across different swing states. Through a comprehensive statistical approach, we aim to contribute to the understanding of the evolving electoral landscape and provide meaningful insights into the forces shaping the 2024 presidential election. We use Bayesian regression model to create a model to predict the percent of population that will support in the swing states based on pollster, the number of days since Kamala Harris joined the race. More on the model and the variables, in the Data and Model sections. 

We noticed in most predictions of the presidential candidate they are usually based on one survey or pollster and they try to gather data from the one poll to predict the the future President. However, through looking at the results from different polls we are able to get a better, more accurate prediction. We also look at over state polls which allows us to focus on the swing states. Swing states are states that change sides every election. The 2 major parties that fight for power are the Republicans and the Democrats. Some states are always voting for one party regardless of the candidate so, the swing states are the once that tell us more about who might win the election. The gap we are trying to cover is predicting the future President of USA by looking at different polls, while being as effecient as possible by looking only at the swing states. 

To go a little more in-depth into what we actually did, we have to first discuss our estimand. Our estimand, the parameter we aim to study, is the predicted support for Kamala Harris in the swing states (measured in %). We do this by creating Baysian model with 3 parameters; state, pollster, and says since Kamala Harris was announced as candidate. We have the priors set with a normal distribution centered at 0, with a standard deviation of 2.5. We expect that because the swing states are states that don't have a party that they dominantly vote for, the expected support will be around 50%. We also make other graphs in the Data section, which helps us understand the values themselves. 
From the result section we find that the average predicted support for Kamala Harris for the 7 swing states were as follows: Arizona at 46.26%, Nevada at 46.43%, Georgia at 46.59%, North Carolina at 47.26%, Michigan at 47.30%, Pennsylvania at 48.02%, Wisconsin at 48.38%. Based on this we predict that Arizona, and Georgia will vote Donald trump and the rest of the states will vote Kamala Harris. 

Predicting who will become president is important because it helps people understand and prepare for future changes in the country’s policies and priorities. A new president can shape laws, affect the economy, influence international relationships, and address key issues like healthcare, education, and climate change. Accurate predictions allow citizens, businesses, and governments to plan and adapt. For example, if polls indicate a particular candidate might win, groups can start thinking about how their plans might align with the candidate's proposed policies. It also helps keep people informed and engaged in the political process, making them more likely to vote and participate in democracy.

The paper is structured with the introduction in the beginning followed by the Data section wich takes a look at the methodology of the paper and how the data was gathered. We explain the variables we isolated in order for this analysis to be complete. Then it is followed by the Model section where we introduce the model and explain the graphs of related models. The result sections will cover the model summary and summary table of the predictions for each of the swing states. The last section is the discussion section where we talk about what the results means and we give our final conclusion and weaknesses. We also give a final word about who will win the upcoming election. We also have additional appendices, where we talk about the methodology of the polls and how they compare. The second appendix talks about a survey we designed with reasons and disadvantage. The third appendix just shows the models in more depth. 


# Data {#sec-data}

## Overview 

As our paper is about the 2024 United States federal election and more specifically we are looking at the polling Data and the polling data comparing the two candidates, former President Donald Trump and Vice President Kamala Harris, for the upcoming election. Our original Data set had over 16,000 unique entries from different pollsters, the business or Organization that conducts the poll. Each poll has two entries, one giving the Data for the polling opinions of Donald Trump and the second for Kamala Harris. We have acquired our polling data from @fivethirtyeight2024.

As there are over 50 variables many of which are redundant to our paper we will only discuss those that we have kept in our clean data as they are the only ones we use in our analysis.

- `pollster`: Shows name of the Pollster that conducted the poll.
- `sample_size`: The number of people that participated in the specific poll.
- `state`: This variable tells us in which States the poll was conducted.
- `candidate_name`: This is the full name of the selected candidate.
- `pct`: This tells us the percentage of participants that intend to vote for the selected candidate.
- `end_date`: The date the pollster finished conducting the poll.

The variables that we have create are:

- `num_harris`: The number of participants that intend to vote for Kamala Harris.
- `end_date_num`: The number of days since the first poll since Harris announced her candidacy, calculated using `end_date`. 

Each pollster has a numeric grade from 1.0 to 3.0, which indicates the quality/ reliability of the respective pollster. Additionally, each pollster is also given a transparency score from 1.0 to 10.0 reflecting how 'transparent' the pollster is, or how much information is disclosed about its polls and methodology. It is important for pollsters to maintain high numeric grades and transparency scores because these metrics directly reflect the quality and reliability of their data. To ensure the highest level of accuracy in our predictions, we only include polls with a numeric grade of 1.5 or above and a transparency score of 6.0 or above.

We use the statistical programming language R [@citeR] to compile this paper. Our data comes from [@fivethirtyeight2024] and was cleaned and visualized using the packages Tidyverse [@tidy], Lubridate [@lubr], Janitor [@janitor], and Knitr [@knitr] and modeled using Rstanarm [@rstanarm], ModelSummary [@modelsummary] and BayesPlot [@bayesplot].


## Methodology and Measurement 

This paper employs a "polls-of-polls" approach to analyze and predict our outcome, combining data from multiple pollsters. By integrating results from various sources, this method captures a broader range of perspectives, reducing the influence of individual biases and offering a more balanced view. Unlike relying on a single poll, which may be shaped by its unique methodological biases, the "polls-of-polls" approach enhances reliability and increases the overall validity of our predictions.

Each pollster uses methodologies they believe are most effective for capturing an accurate snapshot of public opinion. Pollsters begin by selecting a sample of voters they consider representative of the broader population, factoring in various demographics such as age, region, and socio-economic background. However, polling methods differ significantly; some pollsters rely on phone interviews, while others use online surveys, text messaging, or a combination of methods (mixed-mode). After data collection, pollsters apply weighting adjustments to account for demographic imbalances, ensuring that underrepresented groups are adequately reflected in the results.

The diversity in methodologies helps reduce systematic bias compared to using a single poll source. Different methods may also be more effective in reaching certain demographics—such as older voters through phone surveys and younger voters through online platforms—broadening the inclusivity and representativeness of the sample.

In predictive modeling, accounting for pollster variability and methodology is essential to avoid overfitting to any single source. By including pollster as a predictor in the model, we allow it to recognize that poll results may vary not only due to real changes in public opinion but also because of differences in survey methodologies. This consideration enables the model to generate more accurate, generalized predictions, offering a reliable forecast that reflects a well-rounded view of public opinion.

## Data Visualization {#sec-graphs}

```{r}
#| include: false
#| warning: false
#| message: false

#Load and clean data
data <- read.csv("../data/01-raw_data/raw_data.csv") |>
  clean_names()

preddata <- data %>%
  filter(numeric_grade >1.5 & transparency_score >6) %>%
  select(pollster, sample_size, state, candidate_name, pct, start_date, end_date, pollscore, numeric_grade) %>%
  filter(!is.na(pollscore)) %>%
  filter(!is.na(state) & state != "")
```

```{r, fig.height= 2.5}
#| echo: false
#| warning: false
#| message: false
#| label: fig-supportstate
#| fig-cap: "Distribution of Support Percentage by State for Harris vs. Trump"


harrisdata <- preddata %>%
  filter(state %in% c("Georgia", "Arizona", "Nevada", "Michigan", "North Carolina", "Pennsylvania", "Wisconsin")) %>%
  filter(candidate_name == "Kamala Harris") %>%
  mutate(end_date = mdy(end_date)) %>%
  filter(end_date >= as.Date("2024-07-21")) %>%
  mutate(num_harris = round((pct / 100) * sample_size, 0))

harrisdata <- harrisdata %>%
  mutate(end_date_num = as.numeric(end_date - min(end_date)),
        state = factor(state))

trumpdata <- preddata %>%
  filter(state %in% c("Georgia", "Arizona", "Nevada", "Michigan", "North Carolina", "Pennsylvania", "Wisconsin")) %>%
  filter(candidate_name == "Donald Trump") %>%
  mutate(end_date = mdy(end_date)) %>%
  filter(end_date >= as.Date("2024-07-21")) %>%
  mutate(num_trump = round((pct / 100) * sample_size, 0))

combined_data <- harrisdata %>%
  inner_join(trumpdata, by = c("state", "pollster", "sample_size", "end_date")) %>%
  mutate(
    harris_percentage = (num_harris / sample_size) * 100,
    trump_percentage = (num_trump / sample_size) * 100)


time_series_data <- combined_data %>%
  select(state, harris_percentage, trump_percentage) %>%
  pivot_longer(cols = c(harris_percentage, trump_percentage),
               names_to = "candidate",
               values_to = "support_percentage") %>%
  mutate(candidate = ifelse(candidate == "harris_percentage", "Harris", "Trump"))

plot_data <- combined_data %>%
  pivot_longer(cols = c(harris_percentage, trump_percentage),
               names_to = "candidate",
               values_to = "support_percentage") %>%
  mutate(candidate = ifelse(candidate == "harris_percentage", "Harris", "Trump"))

ggplot(plot_data, aes(x = state, y = support_percentage, fill = candidate)) +
  geom_bar(stat = "identity", position = position_dodge(width = 0.9)) +
  labs(,
    x = "State",
    y = "Support Percentage"
  ) +
  scale_fill_manual(values = c("Harris" = "deepskyblue2", "Trump" = "tomato1"), name = "Candidate") +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 30, hjust = 1, vjust = 1, size = 8))
```

In this analysis, we examine polling trends for Kamala Harris across key swing states, focusing on recent polling data from Arizona, Georgia, Michigan, Nevada, North Carolina, Pennsylvania, and Wisconsin [@NYTswingatates]. As shown in @fig-supportstate, which displays the support percentages for both Harris and Donald Trump side-by-side by state, the data reveals a competitive race, with relatively close support levels for both candidates in most states. While Trump has a slight edge in Arizona, Georgia, and North Carolina, Harris maintains a modest lead in Michigan, Nevada, and Pennsylvania.

Moving to @fig-supportharris, which isolates Harris's support percentages across states, we gain insight into the consistency and variability of her support. The box plot highlights states like Wisconsin and Pennsylvania, where the smaller interquartile ranges indicate less variability, suggesting that Harris's support is more stable in these regions. Conversely, states such as Nevada and Georgia show greater variability, as reflected in the larger spread of the boxes and whiskers, indicating that Harris's support fluctuates more in these areas.

```{r, fig.height= 3.5, fig.width= 6.5}
#| echo: false
#| warning: false
#| message: false
#| label: fig-supportharris
#| fig-cap:  "Support Percentage for Harris by State"

harrisdata <- harrisdata %>%
  filter(candidate_name == "Kamala Harris") %>%
  mutate(end_date = as.Date(end_date, format = "%Y-%m-%d"))

ggplot(harrisdata, aes(x = state, y = pct)) +
  geom_boxplot(aes(fill = state), alpha = 0.6, outlier.shape = NA) + 
  geom_jitter(aes(color = state), width = 0.2, alpha = 0.4) + 
  labs(
    x = "State",
    y = "Support Percentage") +
  theme_minimal() +
  theme(legend.position = "none") 
```

To explore temporal trends, we introduce the variable `end_date_num`, representing the number of days since Harris declared her candidacy. The next figures examine support trends over time in individual states.

```{r, fig.width= 6, fig.height= 2}
#| echo: false
#| warning: false
#| message: false
#| label: fig-supportWP
#| fig-cap:  "Predicted Support Percentage for Harris Over Time in Pennsylvania and Wisconsin Since Candidacy Declaration"


subset1 <- harrisdata %>% filter(state %in% c("Wisconsin", "Pennsylvania"))

ggplot(subset1, aes(x = end_date, y = pct, color = state)) +
  geom_point() +
  geom_smooth(se = TRUE) +
  facet_wrap(~ state, scales = "free_y") +
  labs(y = "Harris Percent", x = "Date") +
  theme_minimal() +
    scale_x_date(
    date_breaks = "1 month",           
    date_minor_breaks = "1 week",     
    date_labels = "%b %d" ) +
   theme(legend.position = "none")

```

In @fig-supportWP, Pennsylvania and Wisconsin display distinct trends. In Pennsylvania, support for Harris has been relatively consistent since early September, stabilizing around 48.5%. In contrast, Wisconsin shows a peak in support in mid-September, followed by a gradual decline that stabilizes in October. These observations suggest that while Pennsylvania remains a consistent stronghold for Harris, Wisconsin’s voter sentiment may be more susceptible to fluctuations.

```{r, fig.width= 6, fig.height= 2}
#| echo: false
#| warning: false
#| message: false
#| label: fig-supportAM
#| fig-cap: "Predicted Support Percentage for Harris Over Time in Arizona and Michigan Since Candidacy Declaration"

# Filter for the remaining states
subset2 <- harrisdata %>% filter(state %in% c( "Arizona", "Michigan"))

# Plot the second subset
ggplot(subset2, aes(x = end_date, y = pct, color = state)) +
  geom_point() +
  geom_smooth(se = TRUE) +
  facet_wrap(~ state, scales = "free_y") +
  labs(y = "Harris Percent", x = "Date") +
  theme_minimal() +
      scale_x_date(
    date_breaks = "1 month",
    date_minor_breaks = "1 week",
    date_labels = "%b %d" 
  ) +
   theme(legend.position = "none")
```
@fig-supportAM further examines Harris's support trends in Arizona and Michigan. Both states exhibit an upward trend in support starting in early October, which may suggest increasing favorability or strategic campaign efforts in these regions. This upward trajectory could indicate an opportunity for Harris to solidify her support in these competitive areas.

```{r, fig.width= 7, fig.height= 2.5}
#| echo: false
#| warning: false
#| message: false
#| label: fig-supportGNN
#| fig-cap:  "Predicted Support Percentage for Harris Over Time in Georiga, Nevada, and North Carolina Since Candidacy Declaration"

subset3 <- harrisdata %>% filter(state %in% c("Georgia", "North Carolina", "Nevada"))

# Plot the first subset
ggplot(subset3, aes(x = end_date, y = pct, color = state)) +
  geom_point() +
  geom_smooth(se = TRUE) +
  facet_wrap(~ state, scales = "free_y") +
  labs(y = "Harris Percent", x = "Date") +
  theme_minimal() +
        scale_x_date(
    date_breaks = "1 month",
    date_minor_breaks = "1 week",
    date_labels = "%b %d" 
  ) +
   theme(legend.position = "none")
```

In @fig-supportGNN, we analyze Georgia, Nevada, and North Carolina. Nevada demonstrates the highest variability in Harris's support, which could reflect the state’s dynamic political response to recent campaign efforts. Georgia shows a steady upward trend, indicating growing support for Harris, while North Carolina reveals a slight decline since October, suggesting a possible shift in voter support.

```{r, fig.width= 5.5, fig.height= 2.5}
#| echo: false
#| warning: false
#| message: false
#| label: fig-supportpollsters
#| fig-cap: "Variation in Harris's Support Percentage Across Pollsters Since Harris' Candidacy Declaration "

pollster_summary <- harrisdata %>%
  group_by(end_date_num) %>%
  summarize(mean_support = mean(pct, na.rm = TRUE),
    median_support = median(pct, na.rm = TRUE),
    lower_quartile = quantile(pct, 0.25, na.rm = TRUE),
    upper_quartile = quantile(pct, 0.75, na.rm = TRUE))

ggplot() +
  # Draw a line for each pollster from first to last poll
  geom_point(data = harrisdata %>% group_by(pollster) %>% filter(n() > 1), 
            aes(x = end_date_num, y = pct, group = pollster, color = pollster), 
            alpha = 0.1) +
  # Draw points for each poll (including those with only one poll)
  geom_point(data = harrisdata, aes(x = end_date_num, y = pct, color = pollster), 
             size = 0.5, alpha = 0.3) +
  # Add the median line with ribbon for variability
  geom_line(data = pollster_summary, aes(x = end_date_num, y = median_support), 
            color = "royalblue", size = 1) +
  geom_ribbon(data = pollster_summary, aes(x = end_date_num, ymin = lower_quartile, ymax = upper_quartile), 
              fill = "lightblue", alpha = 0.2) +
  labs(
    x = "Days Since Declaration",
    y = "Support Percentage"
  ) +
  theme_minimal() +
  theme(legend.position = "none")

```

In @fig-supportpollsters, we examine the impact of pollster variability on Harris's support percentage over time. This visualization introduces the variable pollster, highlighting the differences in polling results that arise from varying methodologies. The chart reveals considerable fluctuations and occasional outliers in Harris' support, likely due to the distinct approaches each pollster employs in sampling and weighting responses. 

Overall, these visualizations illustrate that Harris’s voter support is not only state-dependent but also fluctuates significantly over time. In particular, many states exhibit notable shifts around mid-September, pointing to potential influences from external events or campaign dynamics during this period. Furthermore, the observed variability across pollsters emphasizes the necessity of a robust model that can account for differences in pollster methodologies. By incorporating temporal patterns, state-specific characteristics, and pollster variability, our predictive model will aim to provide a more comprehensive and nuanced forecast of support for Harris in key regions, helping to isolate genuine shifts in public opinion from noise introduced by polling differences.


## Outcome and Predictor variables

In this analysis, our primary outcome variable is the support percentage for Kamala Harris. This variable represents the proportion of respondents in each poll who indicated support for Harris. Given the competitive nature of the election, understanding how this support varies across states and over time is crucial for identifying trends and forecasting her overall performance.

In this analysis, our primary outcome variable is the support percentage for Kamala Harris. This variable represents the proportion of respondents in each poll who indicated support for Harris. Given the competitive nature of the election, understanding how this support varies across states and over time is crucial for identifying trends and forecasting her overall performance.

To explain the outcome, we consider several predictor variables:

1. **State**: Since support for candidates can vary significantly across different states due to regional demographics, political history, and local issues, the state variable allows us to capture these geographical differences. As shown in the earlier visualizations, some states demonstrate consistently higher or lower support for Harris, emphasizing the importance of including state-level distinctions in our analysis.

2. **Days Since Declaration**: Representing the number of days since Harris declared her candidacy, this temporal variable helps us capture shifts in voter sentiment over time. Our analysis reveals several critical points where support trends noticeably change, such as the upward or downward shifts in mid-September. This predictor allows the model to account for these temporal patterns and track how Harris’s support evolves as the campaign progresses.

3. **Pollster**: Given that different pollsters employ varied methodologies, sampling techniques, and weighting schemes, the pollster variable captures the potential variability introduced by each polling organization. As illustrated in @fig-supportpollsters, the results can vary considerably depending on the pollster, with some reporting notably higher or lower support percentages for Harris. By including pollster as a predictor, we aim to control for this source of variability, helping the model focus on underlying trends rather than discrepancies introduced by polling differences.

Each of these predictors provides a distinct layer of insight into Harris’s support trends. Together, they form the foundation of our predictive model, which will use these variables to more accurately forecast shifts in voter support and clarify the impact of state, time, and pollster methodology on public opinion.


# Model

## Model Step- Up

The Bayesian model we employ leverages probabilistic reasoning to predict Kamala Harris's support across different states. Bayesian models offer a flexible framework for incorporating prior information alongside observed data to produce posterior distributions, which reflect updated opinions based on the data. This model was chosen for its ability to incorporate prior knowledge, handle uncertainty, and generate predictions that can adapt to the polling data, providing a more comprehensive forecast of Harris’s support across swing states.

We used the `stan_glmer` function from the `rstanarm` package to create a Bayesian regression model with a binomial family and logit link. This model is designed to predict the proportion of respondents who support Kamala Harris based on several key factors.

The model specification is as follows:

```{=tex}
\begin{align} 
y_i|\mu_i, \sigma &\sim \mbox{Normal}(\mu_i, \sigma) \\
\mu_i &= \beta_0 + \beta_1 \times \mbox{State}_i + \beta_2 \times \mbox{Pollster}_i + \beta_3 \times \mbox{Days since first poll}_i\\
\beta_0 &\sim \mbox{Normal}(0, 2.5) \\
\beta_1 &\sim \mbox{Normal}(0, 2.5) \\
\beta_2 &\sim \mbox{Normal}(0, 2.5) \\
\beta_3 &\sim \mbox{Normal}(0, 2.5) \\
\sigma &\sim \mbox{Exponential}(1)
\end{align}
```

The outcome variable in this model is the proportion of respondents who support Harris in each poll, represented as $y_i$. This binomial outcome (successes out of the total sample size) is modeled as a function of several predictor variables that account for differences by state, pollster, and time.

- $y_i$ is the dependent variable, representing the proportion of respondents who support Harris.
- $\beta_0$: The intercept term, representing the expected proportion of $y_i$ when all other predictors are set to zero.
- **State** ($\beta_1$): Categorical variable that accounts for differences in support across seven key swing states.
- **Pollster** ($\beta_2$): Categorical variable capturing variability introduced by the polling organization.
- **Days since first poll** ($\beta_3$): Numeric variable representing the number of days since Harris declared her candidacy.

Each coefficient $\beta$ follows the normal distribution with a mean of 0 and a standard deviation of 2.5, providing some regularization while allowing for a range of possible effects. The standard deviation $\sigma$ is given an Exponential(1) prior, which constrains it to positive values and provides a realistic expectation of variability around the mean 
Each predictor captures a unique dimension of voter sentiment:

- **State** accounts for regional differences in support due to factors like demographics and political history.
- **Pollster** adjusts for methodological variations in polling, which we observed to influence support percentages.
- **Days Since Declaration** captures temporal trends, allowing the model to incorporate fluctuations in voter sentiment over the campaign period.

By combining these predictors, the model aims to forecast Harris’s support by isolating genuine trends from random variability.

### Model justification

Based on the data overview in @sec-graphs, we observe that Harris’s support varies across key swing states, and we expect these regional differences to influence our model's predictions. The state variable is anticipated to capture these geographic variations, with states like Arizona, Michigan, Georgia, and Pennsylvania showing relatively consistent high levels of support for Harris. In contrast, Nevada, North Carolina, and Wisconsin exhibit a declining trend in support. We expect the intercept to be around 50%, as this reflects the average level of support observed across all states and pollsters. 

A model validation is included in `scripts/05-exploratory_data_analysis.R`, and a Posterior Predictive Check and summary statistics for the model are included in @sec-checks.

## Model Results 

The model predicts an average support percentage of approximately 47.33% for Kamala Harris across the selected states. This percentage reflects the central tendency of predicted support within the dataset, factoring in the influence of state, pollster, and the number of days since the first poll.

The results indicate variations in predicted support across states. For instance, Pennsylvania and Wisconsin show the highest average predicted support percentages (48.02% and 48.38%, respectively), while states like Nevada and Arizona display slightly lower support. 

In states like Arizona, Georgia, Michigan, and North Carolina, the model predicts a steady increase in support for Harris over time, as shown in @fig-modelGANM.
In states such as Nevada, Pennsylvania, and Wisconsin, the model predicts a decline in support over time, as seen in @fig-modelNPW.

```{r}
#| echo: false
#| warning: false
#| message: false
#| label: fig-modelGANM
#| fig-cap: "Predicted Probability of Support for Harris Over Time in Arizona, Georgia, Michigan, and North Carolina Since Harris' Candidacy Declaration"

bay_model <-
  readRDS(file = here::here("models/bay_model.rds"))


harrisdata <- harrisdata %>% drop_na()
expected_probs <- posterior_epred(bay_model, newdata = harrisdata)
median_probs <- apply(expected_probs, 2, median)
harrisdata <- harrisdata %>%
  mutate(median_prob = median_probs)

subset_up <- harrisdata %>% filter(state %in% c("Arizona", "Georgia", "Michigan", "North Carolina"))

ggplot(subset_up, aes(x = end_date_num, y = median_prob, color = state)) +
  geom_line(alpha = 0.5) +  
  geom_smooth(method = "gam", formula = y ~ s(x, bs = "cs", k = 10), se = FALSE) +
  labs(
    x = "Days Since First Poll",
    y = "Predicted Probability"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(hjust = 1)) +
  facet_wrap(~ state) +
  theme(legend.position = "none")

```
In @fig-modelNPW, we see states of Nevada, Pennsylvania and Wisconsin have a singular declining trend. 

```{r}
#| echo: false
#| warning: false
#| message: false
#| label: fig-modelNPW
#| fig-cap: "Predicted Probability of Support for Harris Over Time in Nevada, Pennsylvania, and Wisconsin Since Harris' Candidacy Declaration"


subset_down <- harrisdata %>% filter(state %in% c("Nevada", "Pennsylvania", "Wisconsin"))

ggplot(subset_down, aes(x = end_date_num, y = median_prob, color = state)) +
  geom_line(alpha = 0.5) +
  geom_smooth(method = "gam", formula = y ~ s(x, bs = "cs", k = 10), se = FALSE) + 
  labs(
    x = "Days Since First Poll",
    y = "Predicted Probability"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(hjust = 1)) +
  facet_wrap(~ state, ncol = 2) +
    theme(legend.position = "none")

```


CONFIDENCE INTERVAL TABLE ??


```{r}
#| echo: false
#| warning: false
#| message: false
#| label: tbl-supporttable
#| tbl-cap: "Average Predicted Support for Harris by Swing State"

expected_probs <- posterior_epred(bay_model, newdata = harrisdata)
median_probs <- apply(expected_probs, 2, median)
harrisdata <- harrisdata %>%
  mutate(median_prob = median_probs)

predicted_support_table <- harrisdata %>%
  group_by(state) %>%
  summarize(average_predicted_support = round(mean(median_prob) * 100,2)) %>%
    arrange(average_predicted_support) 

kable(predicted_support_table, col.names = c("State", "Avg. Predicted Support for Harris"), digits = 2)
```


# Discussion

Here we will discuss how we believe each state wwill vote both base on data we collected, the models we created and the voting history of each of these swing states in past elections.

## Arizona {#sec-arizona}

Arizona is a very important swing state especially as the state has switches which party they voted for in in the last two elections with Trump winning 49% of the vote and Clinton with 45.5%, which considering Arizona is a swing state is a rather significant6 margin. While in the 2020 election Biden ended up winning Arizona with 49.4% of the vote and Trump 49.1%, which is a much smaller margin of victory and what makes Arizona so questionable in the 2024 election. We can see in @fig-supportAM that while the polling numbers for Harris started somewhat low around 42%, the have gone up significantly and have continued to trend upwards in the most recent polls. Although, in the @fig-supportstate trump still has larger support in the state, and the largest polling difference in Trump's favour out of all the swing states polled @towin270.

We believe Arizona will vote: **Donald Trump**

## Georgia {#sec-georgia}

Considering the last two elections Georgia is very similar to Arizona, as in 2016 Trump won the state with 50.8% to Clinton's 45.6%. While in the 2020 election Biden won with a slim victory of 49.5% to Trump's 49.3%, which again is very similar to Arizona's last two election results with significant republican victory in 2016 and a rather marginal win in 2020, which was the first democratic victory for the state since 1992. Georgia is in an interesting situation as lot of the democratic vote in the state comes from the black community, although Harris a has less support from male black population, as the last victory for Biden was as a small margin, even a small percent of the population switching their vote could heavily impact the vote in 2024.

In @fig-supportGNN at the beginning of the polling data the support for Harris was relatively low, while it did start to grow the polling percentage somewhat plateaued at around 47.5% and does not show any signs of growing. Furthermore, in @fig-supportstate we can see that Trump has the edge over Harris considering all of these factors there is a very real possibility that Trump does win Georgia at the end of the day @towin270.

We believe Georgia will vote: **Donald Trump**

## Nevada {#sec-nevada}

Nevada is a state who's majority is dessert and wilderness, with two large cities being Reno and Las Vegas, as the case is with many states a Majority of democratic votes come from large cities and the majority of republican votes coming from rural areas. Nevada has been a democratic state for the last 4 elections with at least a 2% difference in favor of the democrats in the last two elections @towin270.

Interestingly enough, if we look at @fig-supportGNN we can see Nevada, similar to several other states had a spike in support of Harris in early September peaking north of 48% in the polls and their recent history of voting in favor of the democratic candidates. Nevertheless, Harris is seen to have had a gradual decline in the state stabilizing at around 46%, which which seems low in comparison to other states that are looking more favorably at Harris than Trump. Still, when we look at @fig-supportstate Harris is still has a marginal to Trump, considering all of these factors it is likely Harris will in fact take Nevada for the democrats.

We believe Nevada will vote: **Kamala Harris**

## North Carolina {#sec-norcar}

North Carolina has been an exclusively Republican state since 1980, with a singular exception in 2008 when the state was democratic and voted for Obama. This means that North Carolina voted for Trump in th last two elections, in 2016 there was more significant win for the republican with 49.8% of the vote, with 46.2% going to the Democrats. While in 2020, the Republicans maintained their support from the state but the margin of victory was slimmer with them receiving 49.9% of the vote and Biden getting 48.8% @towin270.

Now, if we look at @fig-supportGNN Harris had a spike in early September like many other states where she was polling around 48%, but afterwards had a minor but gradual decline 
since. Although when we take a look at our model results in @fig-modelGANM we see that our prediction is that Harris's support is predicted to increase in North Carolina.

North Carolina is a significantly difficult state to predict when we consider its Republican history, predicted support for Harris, and @fig-supportstate, where both candidates are neck and neck the chance for this state to go to either candidate is very up in the air.

We believe North Carolina will vote: **Donald Trump**


## Michigan {#sec-michigan}

Harris is currently leading the polls in Michigan with 49% of the vote and Trump with 47%, this is a rather slim margin, but the first in the discussed states where Harris is leading in the polls. In @fig-supportAM we can see that there was a significant jump for Harris and a small dip in October followed by a gradual increase leading up to the elections. When we look at the voting history of the state in the last two elections, the have voted for the same candidates as Arizona and Georgia, where they voted for Biden in 2020 and for Trump in 2016, with the voting percentages at 50.6% to 47.8% in 2020 and 47.5% to 47.3 in 2016 with respect to the winner. Although unlike the previously mentioned states 2016 was the first time the state voted for the republican candidate since 1992. Considering Michigan is home to the largest black majority city in the United states, Detroit, and a large majority of union workers who often vote democratic as it is seen as the more union-friendly party between the two it is rather like that Harris will win the state @towin270.

We believe Michigan will vote for: **Kamala Harris**

## Pennsylvania {#sec-penn}

Pennsylvania is an interesting for several reasons, the first is that before Tim Walz was announced as Kamala Harris's running mate, one of the speculated candidates was Josh Shapiro, the current governor of Pennsylvania, which presidential candidates often consider from where their potential running mates are from as they tend to help with swing states nevertheless, she did not choose Shapiro as her running mate and this is no longer a factor. 

Second, Similarly to Nevada and Michigan Pennsylvania Voted for Trump in 2016 with a 48.2% to a 47.5% victory, and for Biden in 2020 with a slightly more significant but not overwhelming victory at 50% to 48.8%. 2016 was the first time Pennsylvania voted for a republican candidate since 1988 @towin270. 

Lastly, if we consider @fig-supportWP we see that harris has been polling at a consistent 48% since mid september which is somewhat similar to Georgia, while Pennsylvania seems to be leaning more democratic than republican than Georgia.@fig-supportGNN, they have both similarly increased their interest in Harris since the polling began until mid september which is when they both becan to plateau at their current polling numbers.

We believe Pennsylvania will vote: **Kamala Harris**

## Wisconsin {#sec-wisconsin}

The last swing state we will be discussing is Wisconsinng which we can see in our prediction table, @tbl-supporttable, has the high support at 48.38% for Harris from all this swing states we looked at. when we look at @fig-supportWP, se a small spike in early september for Harris, followed by a gradual stabilization at around 48% support for Harris similar to what our model shows. Now if we also take into ac count @fig-supportstate, we see that Wisconsin has the largest difference in support for Harris in comparison to all previously mentioned swing states.

Lastly, if we look at Wisconsin's voting history, the only time Wisconsin voted Republican since 1988 was in 2016 when the state gave its electoral votes for Trump with 47.2% of the vote to Clinton's 46.5% then in 2020 the state went back to blue with Biden winning the state, all things considered out of all states we took into account Harris is likely to win @towin270.

We believe Wisconsin will vote: **Kamala Harris**

## Electoral Vote Projection and Predicted Outcome

Without considering the swing states and if we assume all the other states will vote as expected Kamala Harris has a slight lead of 226 electoral votes to Donald Trump's 219. Now, if we take the 43 combined votes of Arizona, Georgia, and North Carolina, and add it to Trumps tally. While allocate Nevada, Michigan, Pennsylvania, and Wisconsin's votes to Harris which sum up to 50 electoral votes. This totals to a Democratic victory for Kamala Harris at 276 votes to Donald Trump's 262, we have come to the conclusion that Kamala Harris is likely to win the upcomming United States election by 14 electoral votes. Below we have included an image of what we believee the electoral map will look after the election November 5th, @towin270:


::: {.cell}
![Predicted Electoral Votes for the 2024 US Election ](../other/images/Election_map.png){fig-align="center" width="100%"}
:::


## Limitations and Weaknesses

There are several limitations and weaknesses that could have affected out research and statistical analysis. First, the variable `numeric_grade` which is the variable that weighs pollster results for accuracy could have been used to determing the how we look at each pollster to make sure the pollster we chose was the most accurate of the most available, and could have included it in our model to increase accuracy of our predictions.Second, as the data from polls change often especially leading up to the election it is difficult to make realtime adjustments as new data becomes available. Next, Harris only announced her candidacy at the end of July, we did not have a very large time frame to take into account whenn looking at her polling data, as often presidential candidates begin campaigning much earlier than just a few months before the election. Further, As we only created a Model for Harris and not Trump we had less to compare to, while we believe our results would not have changed significantly it would have ben halpful to consider a model based around Donald Trump. Lastly, in recent history elections have been rather close whether they were close in electoral votes or in the popular vote, pollster are hesitant to state that one candidate will win over another even if their research and data shows otherwise as they are afraid to lose their credibility for future elections if they turn out to be wrong or if their analysis is different than the actual results.

## Next steps

- use historical data from past elections to identify strong voting patterns 
- generate confidence intervals 
- integrate more context, and more vairables : Future studies could examine how state-level socioeconomic and political factors, such as unemployment rates, healthcare concerns, or local election issues, might influence voter preferences in each swing state. This would add depth to the model and align predictions more closely with real-world factors.

\newpage

\appendix

# Pollster Methodology

The New York Times/Siena College Poll is a respected polling partnership known for providing data-driven insights into U.S. public opinion on political, social, and economic issues. Recognized for its rigorous methodology, the poll focuses on capturing the views of registered and likely voters across the country, with particular emphasis on key battleground states during election cycles. Frequently cited for its accuracy and transparency, it is widely regarded as a reliable source by the public, political analysts, and the media.

The poll conducts live telephone interviews with a national sample of registered voters, reaching over 90% of respondents via cellphones. The target population consists of U.S. registered voters, with the sampling frame drawn from a comprehensive voter file covering 200 million individuals. This file contains demographic and geographic information to ensure sampling is representative across age, race, political affiliation, and region. The poll places particular focus on swing states like Arizona, Georgia, Michigan, Nevada, Pennsylvania, and Wisconsin, where small shifts in voter opinion can determine the electoral outcome. Respondents are recruited randomly from the voter file to capture a diverse range of political perspectives, demographics, and regional backgrounds. To mitigate non-response bias, which is significant given a response rate of around 2%, the poll applies demographic weighting to underrepresented groups, such as young adults and non-college graduates (@NYTpolls).

The methodology of telephone polling provides benefits, such as enabling random sampling across a broad population. However, low response rates and the shift away from landlines to cellphones mean certain groups, particularly younger adults, may be underrepresented despite demographic weighting adjustments. While the questionnaire is crafted to be clear, neutral, and balanced across political views, the brief format of phone surveys—designed to improve response rates—limits depth. Additionally, phone surveys may not reach segments of the population more responsive to digital surveys or in-person interviews, potentially missing out on specific voter perspectives. Each respondent’s answer is then adjusted for weighting to ensure proportionality, and results are aggregated to reflect a balanced, representative outcome of public opinion, rather than raw, unadjusted numbers.

Overall, while the New York Times/Siena College Poll is highly regarded for its thorough approach, methodological constraints, such as low response rates and limited outreach to digitally-focused populations, introduce challenges to representativeness.

# Survey

Here we will be talking about how we would conduct a $100,000 surevy to gather data about this upcoming election to ensure there is minimal error in the data we are collecting and, our data represents the facts we want them to represent. 
Out of the \$100,000 we will allocate \$15000 for the necessary development and administration of the data. This means we will be spending this money to create the survey, and have a infrastructure in place to hold the large amount of data as well as cover any security fees to keep this data private and safe. Then we allocate $50000 to advertise the survey. We will need a large sample so we will be spending most of our budget for this. We will have a different urls for each advertisement we have so that we can incorporate this in our data to see which demographic is accessing the survey through which platform. The platforms to advertise this is through spotify, facebook, instagram, and some news networks. If possible we will try to use this money to get it endorsed by branches of government to show our reliability. Reliability is also what citizens respond to so this will get a lot of respondents. We will spend \$25,000 for modeling our data as they tend to be expensive with data this size. And the rest of the \$15,000 will be leftover cost for anything that we don't foresee. If there is any leftover we can add a survey participation price such as having a free 3 month trial for the platforms we mentioned above (that is if they have a subscription based membership). 

We will not be using telephone surveys because according to research [@idSurvey] we find the most people, don't pick up calls from unknown numbers and even the people that pick it up they are less inclined to answer the questions of the survey. 

Next to look at the actual contents of the survey. They can be accessed through this link: [Sample survey question](https://forms.office.com/Pages/ResponsePage.aspx?id=JsKqeAMvTUuQN7RtVsVSEL7G89G56QlHp_qqIPzGbJdUME9UQzJaWUlCVldZTktRV09UQ0Q3N0hQRi4u). There are 3 things that we were careful of when we were creating this survey. First thing we considered was transperency. People need the reassurance that the data that is being collected will not be used against them, and so we feel them what data we do collect and how the data we collect cannot be used to identify a person. The second thing we focus on is readability of the questions. We tried to make them as simple as possible using accessibile language, and tried to keep it short as well (@Tourangeau_Rips_Rasinski_2000). We also prioritised the size of the survey. We kept it to a short 11 questions that will tell us their political standing in the past and present. We know what current issues are important to them as well as their age group and the state they are from. This will help us gather data without inconveniencing the person. There are disadvanatages to the way we structured the survey. For example, we were keeping time and security in mind, so we restricted the survey to 11 questions, however, this limits the amount of answers we get from the reader. We may be missing some crucial information that helps us figure out which group of people may vote for whom, such as ethnicity and wages (@annurev). 

Finally we take a look at how we sample from the gathered data. We thought about random sampling but we were worried about having unequal proportions of the demographic we would advertise to. So if more people that go to facebook responded, that doesn't necessarily mean that people use facebook more than the other platforms. So we we decided to combine stratified and cluster  sampling(@annurev). The idea is that we will choose based on the different platforms we advertise to first to have a cluster sampling method. And then we will sample the data by dividing the people by the certain aspects of the surevy, like if they are in different age groups or if they are registered voters. This is called Stratified Sampling (@annurev). Then we take a union of all the samples and we gather a group that we are able to build models based off of.

There are obvious disadvantages as well. For example, we have fewer questions meaning when we sample based on the question we might have cases where, some groups are over or under represented. This can happen for example when most of the people who answered might be from age 18-50 because those are the age groups with access to a phone and are frequently visiting the sites we advertise our survey on. Also the different apps may skew the data as Facebook has a older audience as opposed to Instagram and Tiktok. Another disadvantage is the fact that we have 2 different sampling methods that we use and we combine them both, meaning that this can be an expensive process. Doing so may exceed the allocated budget however, it will be worth it because we minimize the sampling bias we talk about earlier where we may have a group that has more access to the survey. The last disadvantage we also foresee is the fact that younger audience may not be as interested in filling out a survey about politics as they feel, it might not directly affect them. We try to minimize this by offering compensation for their time when they fill out the survey, i.e. free membership services for 3 months on Spotify. 

Although there are both advantages and disadvantages, we feel that this survey is well though out and doesn't allow for ambiguity in the answers of the participants. 

# Posterior Predictive Check {#sec-checks}

```{r, fig.width=5, fig.height=3}
#| echo: false
#| warning: false
#| message: false
#| label: fig-ppcheck
#| fig-cap: "Posterior Predictive Check of Model"

# Plot checks for Model
pp_check(bay_model)

```

In @fig-ppcheck, we check the Posterior predictive check of model of our model. Since the raw data aligns closely with our predictions, our model is a good prediction of the data.

\newpage

# References
